<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Quiz Master Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
            overflow: hidden; /* Prevent body scroll, use container scroll */
        }
        body.lang-bn { font-family: 'Hind Siliguri', sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .glass-card { background: rgba(51, 65, 85, 0.4); backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.05); transition: all 0.2s ease; }
        .glass-card:active { transform: scale(0.98); background: rgba(51, 65, 85, 0.6); }
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        .slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .progress-fill { transition: width 0.3s ease; }
        
        /* Custom Scrollbar for Glass UI */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
    </style>
</head>
<body class="h-[100dvh] flex flex-col items-center justify-center p-4">

    <div class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10">
        <div class="absolute top-[-10%] right-[-5%] w-72 h-72 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20"></div>
        <div class="absolute bottom-[-10%] left-[-5%] w-72 h-72 bg-blue-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20"></div>
    </div>

    <main id="app-container" class="w-full max-w-md glass rounded-3xl shadow-2xl overflow-hidden relative h-full max-h-[800px] flex flex-col">
        
        <div class="absolute top-4 right-4 z-20 flex gap-2">
            <button onclick="showLeaderboard()" class="glass-card p-2 rounded-full text-yellow-400">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
            </button>
            <button onclick="toggleLanguage()" class="glass-card px-3 py-1.5 rounded-full text-xs font-bold text-slate-300 flex items-center gap-2">
                <span id="lang-icon">üá∫üá∏</span><span id="lang-text">EN</span>
            </button>
        </div>

        <!-- SCREEN: START -->
        <div id="start-screen" class="flex-1 flex flex-col p-8 pt-12 space-y-6 slide-up overflow-y-auto">
            <div class="flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-gradient-to-tr from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg mb-4">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                </div>
                <h1 data-key="appTitle" class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400">Quiz Master</h1>
                <p data-key="appSubtitle" class="text-slate-400 text-sm mt-2">Choose a category</p>
            </div>

            <div class="grid grid-cols-2 gap-3 w-full pb-6">
                <button onclick="startQuiz('gk')" class="glass-card p-4 rounded-2xl flex flex-col items-center gap-2">
                    <span class="text-2xl">üåç</span><span data-key="catGK" class="text-sm font-semibold">General</span>
                </button>
                <button onclick="startQuiz('science')" class="glass-card p-4 rounded-2xl flex flex-col items-center gap-2">
                    <span class="text-2xl">üß¨</span><span data-key="catScience" class="text-sm font-semibold">Science</span>
                </button>
                <button onclick="startQuiz('tech')" class="glass-card p-4 rounded-2xl flex flex-col items-center gap-2">
                    <span class="text-2xl">üíª</span><span data-key="catTech" class="text-sm font-semibold">Coding</span>
                </button>
                <button onclick="startQuiz('math')" class="glass-card p-4 rounded-2xl flex flex-col items-center gap-2">
                    <span class="text-2xl">üìê</span><span data-key="catMath" class="text-sm font-semibold">Math</span>
                </button>
            </div>
        </div>

        <!-- SCREEN: LEADERBOARD -->
        <div id="leaderboard-screen" class="hidden flex-1 flex flex-col p-6 slide-up">
            <div class="flex items-center gap-3 mb-6 shrink-0">
                <button onclick="closeLeaderboard()" class="text-slate-400"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
                <h2 data-key="leaderboardTitle" class="text-xl font-bold text-white">Leaderboard</h2>
            </div>
            <div id="leaderboard-list" class="flex-1 space-y-3 overflow-y-auto pr-2">
                <!-- Rows injected here -->
            </div>
        </div>

        <!-- SCREEN: QUIZ -->
        <div id="quiz-screen" class="hidden flex-1 flex flex-col p-6 overflow-y-auto">
            <div class="flex justify-between items-center mb-6 shrink-0">
                <span id="question-counter" class="text-lg font-bold text-white">1/10</span>
                <div class="flex items-center gap-2 bg-slate-800/50 px-3 py-1 rounded-lg border border-slate-700">
                    <span id="timer" class="font-mono font-bold text-blue-400">10</span>
                </div>
            </div>
            <div class="w-full h-1.5 bg-slate-800 rounded-full mb-8 overflow-hidden shrink-0">
                <div id="progress-bar" class="h-full bg-blue-500 progress-fill w-0"></div>
            </div>
            <div class="flex-1 flex flex-col justify-center mb-6">
                <span id="cat-badge" class="self-start mb-2 px-2 py-1 rounded text-[10px] font-bold bg-slate-700 text-slate-300 uppercase">CATEGORY</span>
                <h2 id="question-text" class="text-xl font-semibold leading-relaxed text-white fade-in">Loading...</h2>
            </div>
            <div id="options-container" class="grid grid-cols-1 gap-3 pb-4"></div>
            <button id="next-btn" onclick="nextQuestion()" class="mt-auto w-full py-4 bg-slate-700 text-slate-400 font-semibold rounded-xl opacity-0 pointer-events-none transition-all" disabled>Next</button>
        </div>

        <!-- SCREEN: RESULT -->
        <div id="result-screen" class="hidden flex-1 flex flex-col items-center justify-center p-8 text-center space-y-6">
            <div class="w-24 h-24 rounded-full border-4 border-slate-700 flex items-center justify-center bg-slate-800">
                <span id="final-score" class="text-3xl font-bold text-white">0</span>
            </div>
            <h2 id="result-title" class="text-2xl font-bold">Completed!</h2>
            <button onclick="restartQuiz()" class="w-full py-4 bg-white text-slate-900 font-bold rounded-xl active:scale-95 transition-all"><span data-key="playAgain">Play Again</span></button>
        </div>
    </main>

    <script>
        const translations = {
            en: { appTitle: "Quiz Master", appSubtitle: "Choose a category", catGK: "General", catScience: "Science", catTech: "Coding", catMath: "Math", nextBtn: "Next", finishBtn: "Finish", playAgain: "Play Again", leaderboardTitle: "Leaderboard", noData: "No records yet" },
            bn: { appTitle: "‡¶ï‡ßÅ‡¶á‡¶ú ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞", appSubtitle: "‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡¶ø‡¶∑‡ßü ‡¶¨‡ßá‡¶õ‡ßá ‡¶®‡¶ø‡¶®", catGK: "‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ú‡ßç‡¶û‡¶æ‡¶®", catScience: "‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®", catTech: "‡¶ï‡ßã‡¶°‡¶ø‡¶Ç", catMath: "‡¶ó‡¶£‡¶ø‡¶§", nextBtn: "‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ", finishBtn: "‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡ßÅ‡¶®", playAgain: "‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶≤‡ßÅ‡¶®", leaderboardTitle: "‡¶≤‡¶ø‡¶°‡¶æ‡¶∞‡¶¨‡ßã‡¶∞‡ßç‡¶°", noData: "‡¶ï‡ßã‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡ßá‡¶á" }
        };

        const categories = {
            gk: { label: { en: "General Knowledge", bn: "‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ú‡ßç‡¶û‡¶æ‡¶®" }, data: [{ q: { en: "Capital of France?", bn: "‡¶´‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡ßá‡¶∞ ‡¶∞‡¶æ‡¶ú‡¶ß‡¶æ‡¶®‡ßÄ?" }, opt: { en: ["Berlin", "Paris", "Rome", "Madrid"], bn: ["‡¶¨‡¶æ‡¶∞‡ßç‡¶≤‡¶ø‡¶®", "‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶∏", "‡¶∞‡ßã‡¶Æ", "‡¶Æ‡¶æ‡¶¶‡ßç‡¶∞‡¶ø‡¶¶"] }, correct: 1 }, { q: { en: "Largest ocean?", bn: "‡¶¨‡ßÉ‡¶π‡¶§‡ßç‡¶§‡¶Æ ‡¶Æ‡¶π‡¶æ‡¶∏‡¶æ‡¶ó‡¶∞?" }, opt: { en: ["Atlantic", "Indian", "Pacific", "Arctic"], bn: ["‡¶Ü‡¶ü‡¶≤‡¶æ‡¶®‡ßç‡¶ü‡¶ø‡¶ï", "‡¶≠‡¶æ‡¶∞‡¶§", "‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶®‡ßç‡¶§", "‡¶Ü‡¶∞‡ßç‡¶ï‡¶ü‡¶ø‡¶ï"] }, correct: 2 }] },
            science: { label: { en: "Science", bn: "‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®" }, data: [{ q: { en: "Symbol of Gold?", bn: "‡¶∏‡ßç‡¶¨‡¶∞‡ßç‡¶£‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ï‡ßá‡¶§?" }, opt: { en: ["Au", "Ag", "Gd", "Fe"], bn: ["Au", "Ag", "Gd", "Fe"] }, correct: 0 }] },
            tech: { label: { en: "Coding", bn: "‡¶ï‡ßã‡¶°‡¶ø‡¶Ç" }, data: [{ q: { en: "HTML stands for?", bn: "HTML ‡¶è‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶∞‡ßÇ‡¶™?" }, opt: { en: ["HyperText Markup", "Home Tool", "High Task", "None"], bn: ["‡¶π‡¶æ‡¶á‡¶™‡¶æ‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü", "‡¶π‡ßã‡¶Æ ‡¶ü‡ßÅ‡¶≤", "‡¶π‡¶æ‡¶á ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï", "‡¶ï‡¶ø‡¶õ‡ßÅ‡¶á ‡¶®‡¶æ"] }, correct: 0 }] },
            math: { label: { en: "Math", bn: "‡¶ó‡¶£‡¶ø‡¶§" }, data: [{ q: { en: "5 x 5?", bn: "‡ß´ x ‡ß´?" }, opt: { en: ["20", "25", "30", "15"], bn: ["‡ß®‡ß¶", "‡ß®‡ß´", "‡ß©‡ß¶", "‡ßß‡ß´"] }, correct: 1 }] }
        };

        let currentLang = 'en', currentQuestions = [], currentQuestionIndex = 0, score = 0, timerInterval, timeLeft = 10, isAnswered = false;

        function t(key) { return translations[currentLang][key] || key; }
        function toBn(num) { const d = ['‡ß¶','‡ßß','‡ß®','‡ß©','‡ß™','‡ß´','‡ß¨','‡ß≠','‡ßÆ','‡ßØ']; return num.toString().split('').map(c => d[parseInt(c)] || c).join(''); }
        
        function updateUI() {
            document.querySelectorAll('[data-key]').forEach(el => el.textContent = t(el.getAttribute('data-key')));
            document.getElementById('lang-text').textContent = currentLang.toUpperCase();
            document.getElementById('lang-icon').textContent = currentLang === 'en' ? 'üá∫üá∏' : 'üáßüá©';
            document.body.classList.toggle('lang-bn', currentLang === 'bn');
        }

        window.toggleLanguage = () => { currentLang = currentLang === 'en' ? 'bn' : 'en'; updateUI(); };

        window.startQuiz = (catKey) => {
            currentQuestions = [...categories[catKey].data].sort(() => 0.5 - Math.random());
            currentQuestionIndex = 0; score = 0; 
            document.getElementById('cat-badge').textContent = categories[catKey].label[currentLang];
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            loadQuestion();
        };

        function loadQuestion() {
            isAnswered = false; timeLeft = 10; clearInterval(timerInterval);
            const q = currentQuestions[currentQuestionIndex];
            document.getElementById('question-text').textContent = q.q[currentLang];
            document.getElementById('question-counter').textContent = `${currentLang === 'bn' ? toBn(currentQuestionIndex + 1) : currentQuestionIndex + 1}/${currentLang === 'bn' ? toBn(currentQuestions.length) : currentQuestions.length}`;
            document.getElementById('progress-bar').style.width = `${(currentQuestionIndex / currentQuestions.length) * 100}%`;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            q.opt[currentLang].forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "glass-card w-full p-4 text-left rounded-xl text-slate-200";
                btn.innerHTML = `<span class="inline-block w-6 h-6 rounded-full bg-slate-700 text-center text-xs mr-3">${String.fromCharCode(65+idx)}</span> ${opt}`;
                btn.onclick = () => checkAnswer(idx, btn);
                container.appendChild(btn);
            });

            document.getElementById('next-btn').classList.add('opacity-0', 'pointer-events-none');
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = currentLang === 'bn' ? toBn(timeLeft) : timeLeft;
                if(timeLeft <= 0) { clearInterval(timerInterval); checkAnswer(-1); }
            }, 1000);
        }

        function checkAnswer(idx, btn) {
            if(isAnswered) return; isAnswered = true; clearInterval(timerInterval);
            const correct = currentQuestions[currentQuestionIndex].correct;
            const btns = document.getElementById('options-container').children;
            
            if(idx === correct) { score++; btn.classList.add('bg-green-500/20', 'border-green-500'); } 
            else if(idx !== -1) { btn.classList.add('bg-red-500/20', 'border-red-500'); }
            
            if(btns[correct]) btns[correct].classList.add('bg-green-500/20', 'border-green-500');
            Array.from(btns).forEach(b => b.classList.add('pointer-events-none'));

            const nextBtn = document.getElementById('next-btn');
            nextBtn.classList.remove('opacity-0', 'pointer-events-none');
            nextBtn.disabled = false;
            nextBtn.textContent = currentQuestionIndex === currentQuestions.length -1 ? t('finishBtn') : t('nextBtn');
        }

        window.nextQuestion = () => {
            currentQuestionIndex++;
            if(currentQuestionIndex < currentQuestions.length) loadQuestion();
            else finishQuiz();
        };

        function finishQuiz() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').textContent = currentLang === 'bn' ? toBn(score) : score;
            
            const history = JSON.parse(localStorage.getItem('quiz_leaderboard') || '[]');
            history.push({ score, date: new Date().toLocaleDateString(), lang: currentLang });
            history.sort((a,b) => b.score - a.score);
            localStorage.setItem('quiz_leaderboard', JSON.stringify(history.slice(0, 10)));
        }

        window.showLeaderboard = () => {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('leaderboard-screen').classList.remove('hidden');
            const list = document.getElementById('leaderboard-list');
            const history = JSON.parse(localStorage.getItem('quiz_leaderboard') || '[]');
            list.innerHTML = history.length ? history.map((entry, i) => `
                <div class="glass-card p-4 rounded-2xl flex justify-between items-center">
                    <div class="flex items-center gap-4">
                        <span class="text-xl font-bold ${i===0?'text-yellow-400':'text-slate-400'}">#${currentLang === 'bn' ? toBn(i+1) : i+1}</span>
                        <div>
                            <p class="text-xs text-slate-500">${entry.date}</p>
                        </div>
                    </div>
                    <span class="text-xl font-bold">${currentLang === 'bn' ? toBn(entry.score) : entry.score}</span>
                </div>
            `).join('') : `<p class='text-center text-slate-500 mt-10'>${t('noData')}</p>`;
        };

        window.closeLeaderboard = () => {
            document.getElementById('leaderboard-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
        };

        window.restartQuiz = () => location.reload();

        updateUI();
    </script>
</body>
</html>